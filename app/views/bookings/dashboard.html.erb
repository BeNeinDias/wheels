<div class="wrapper">
  <div class="container">
    <!-- This shows ongoing bookings -->
    <div class="row">
      <div class="dash-square portfolio portfolio-vals">
        <div class="car-card-title">
          <div class="green-line"></div>
          <h3 class="title-show">Ongoing Bookings</h3>
        </div>
        <div class="product">
          <div class='product-body bookings-list'>
            <h3></h3>
          </div>
          <ul class="list-inline product-controls cards-list-dashboard bookings-dashboard">
            <li>Price</li>
            <li>Dates</li>
            <li id="bookings-buttons-column" style="width: 410px";>  </li>

          </ul>
        </div>
        <% @bookings.each do |booking| %>
          <% if booking.date_to > Date.today %>
          <div class="product product-list">
            <div class='product-body bookings-list'>
              <h3><%= booking.car.brand %> <%= booking.car.model %></h3>
            </div>
            <ul class="list-inline product-controls cards-list-dashboard bookings-dashboard">
              <li><%= booking.price.to_i %>€</li>
              <li style= "width: 90%;"><%= Date::MONTHNAMES[booking.date_to.month] %> <%= booking.date_from.day %>, <%= booking.date_from.year %> to <%= Date::MONTHNAMES[booking.date_to.month] %> <%= booking.date_to.day %></li>
              <li id="bookings-buttons-column">
                <div class="booking-button">
                  <%= link_to "Edit", edit_booking_path(booking.id), class: "btn btn-edit" %>
                </div>
                <div class="booking-button">
                  <%= link_to "Delete", booking_path(booking), method: :delete, data: { confirm: "are you sure?" }, class: "btn delete-btn" %>
                </div>
              </li>
            </ul>
          </div>
          <% end %>
        <% end %>
      </div>
      <!-- This shows total profit and media rating -->
      <div class="dash-square portfolio portfolio-stats">
        <div class="car-card-title">
          <div class="green-line"></div>
          <h3 class="title-show">Profit/Rating</h3>
        </div>
        <div class="ratings-dashboard">
          <div class="profit-group">
            <i style="font-size: 41px;color: #60CD44;" class="fas fa-money-bill-alt"></i>
            <p><%= number_with_precision(@total_profit, :precision => 1, :delimiter => ',') %>€</p>
           <!--  <p><#%= @total_profit.to_i %>€</p> -->
          </div>
          <% rating = 0 %>
          <% number_ratings = 0 %>
          <% @reviews.each do |review| %>
            <% rating = rating + review.rating.to_f %>
            <% number_ratings += 1 %>
          <% end %>
          <% if number_ratings == 0 %>
            <h4>You have no ratings, yet!</h4>
          <% else %>
            <div class="rating-group">
              <i style="font-size: 41px;color: #60CD44;" class="fas fa-star"></i>
              <p><%= (rating / number_ratings).round() %>/5</p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <!-- This will show cars owned by the user -->
    <div class="row">
      <div class="dash-square my-portfolio">
        <div class="car-card-title">
          <div class="green-line"></div>
          <h3 class="title-show">Your cars</h3>
        </div>
        <div class="product">
          <div class='product-body'>
            <h3> </h3>
          </div>
          <ul class="list-inline product-controls">
            <li>Nº Bookings</li>
            <li>Price per day</li>
            <li>Profit per car</li>
          </ul>
        </div>
        <% @cars.each do |car| %>
        <div class="product product-list">
          <div class='product-body'>
            <h3><%= car.brand %> <%= car.model %></h3>
          </div>
          <ul class="list-inline product-controls">
            <li><%= car.bookings.all.length %></li>
            <li><%= car.price_per_day.to_i %>€</li>
            <li><%= @number_of_days * car.price_per_day.to_i %>€</li>
          </ul>
        </div>
        <% end %>
      </div>
    </div>
    <!-- This will show past bookings -->
    <div class="row">
      <div class="dash-square my-portfolio">
        <div class="car-card-title">
          <div class="green-line"></div>
          <h3 class="title-show">Past Bookings</h3>
        </div>
        <div class="product">
          <div class='product-body bookings-list'>
            <h3></h3>
          </div>
          <ul class="list-inline product-controls cards-list-dashboard bookings-dashboard">
            <li style="width: 80%;">Price</li>
            <li style="width: 67%;">Dates</li>
            <li id="bookings-buttons-column" style="width: 410px";>  </li>

          </ul>
        </div>
        <% @bookings.each do |booking| %>
          <% if booking.date_to < Date.today %>
            <div class="product product-list">
          <div class='product-body'>
            <h3><%= booking.car.brand %> <%= booking.car.model %></h3>
          </div>
          <ul class="list-inline product-controls">
            <li><%= booking.price.to_i %>€</li>
            <li style="width: 200%;"><%= Date::MONTHNAMES[booking.date_to.month] %> <%= booking.date_from.day %>, <%= booking.date_from.year %> to <%= Date::MONTHNAMES[booking.date_to.month] %> <%= booking.date_to.day %></li>
            <li id="bookings-buttons-column">
              <div class="booking-button add-review-button-past">
                <%= link_to "Add Review", new_booking_review_path(booking.id), class: "btn btn-add-review" %>
              </div>
            </li>
          </ul>
        </div>
          <% end %>
        <% end %>
      </div>
    </div>
     <!--  <div class="dash-square top-win-lose">

      </div>
      <div class="dash-square twitter-feed">

      </div>
      <div class="dash-square top-traded">

      </div> -->
    </div>
  </div>
</div>
